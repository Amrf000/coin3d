#! /bin/sh
# **************************************************************************
# This is a script for retrieving configuration information about the
# installed Coin libraries on the system.
#
# Authors:
#   Morten Eriksen <mortene@coin3d.org>
#   Lars J. Aas <larsa@coin3d.org>
#

me=`echo "$0" | sed 's,^.*[/\\],,g'`
wd=`echo "$0" | sed 's,/[^/]*$,,'`
# wd=`cd "$wd"; pwd`
prefix=`cd "$wd/.."; pwd`

alternate=default
for arg
do
  case $arg in
  --alternate=*) alternate=`echo $arg | cut -d= -f2-` ;;
  esac
done

if test -f $prefix/share/Coin/conf/coin-$alternate.cfg; then
  . $prefix/share/Coin/conf/coin-$alternate.cfg
elif test -f $prefix/share/Coin/conf/coin-default.cfg; then
  . $prefix/share/Coin/conf/coin-default.cfg
else
  echo >&2 "$me: no default Coin config available"
  exit 1
fi

usage="\
Usage: $me [OPTIONS]
Options:
  --alternate=<string>
  --cppflags
  --cxxflags
  --ldflags
  --libs
  --datadir
  --build <program> <sourcefile> [<sourcefile>]...
  --version
  --usage | --help"

while test $# -gt 0
do
  case $1 in
  --help | --usage) echo "$usage" ;;
  --version)        echo "$version" ;;
  --cppflags)       echo "$cppflags" ;;
  --cxxflags)       echo "$cxxflags" ;;
  --ldflags)        echo "$ldflags" ;;
  --libs)           echo "$libs" ;;
  --datadir)        echo "$datadir" ;;
  --build)
    shift
    program=$1
    shift
    exec $compiler \
      $CPPFLAGS $cppflags \
      $CXXFLAGS $cxxflags \
      $LDFLAGS $ldflags \
      -o $program $@ \
      $LIBS $libs
    ;;
  # ignore some options
  --alternate=*) ;;
  *)
    echo >&2 "$me: Invalid option: \"$1\""
    echo >&2 "$usage"
    exit 1
    ;;
  esac
  shift
done

exit 0

